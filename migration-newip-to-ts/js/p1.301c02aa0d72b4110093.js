(()=>{"use strict";var e={440:(e,t,o)=>{o.r(t)},609:(e,t,o)=>{o.r(t)},787:(e,t,o)=>{o.r(t)},956:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(o(582)),n=o(901);t.default=class{constructor(){this.controller=new s.default,this.view=new n.AppView}start(){var e;null===(e=null===document||void 0===document?void 0:document.querySelector(".sources"))||void 0===e||e.addEventListener("click",(e=>this.controller.getNews(e,(e=>{"totalResults"in e&&this.view.drawNews(e)})))),this.controller.getSources((e=>{"sources"in e&&this.view.drawSources(e)}))}}},581:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(o(385));class n extends s.default{constructor(){super("https://nodenews.herokuapp.com/",{apiKey:"0962f003e4114ee19bbd1f20d04ccddf"})}}t.default=n},582:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(o(581));class n extends s.default{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let o=e.target;const r=e.currentTarget;for(;o!==r;){if(o.classList.contains("source__item")){const e=o.getAttribute("data-source-id");return void(o.getAttribute("data-source")!==e&&"object"!=typeof e&&(o.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}o=o.parentNode}}}t.default=n},385:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e,options:t={}},o=(e=>{console.error("No callback for GET response")})){this.load("GET",e,o,t)}errorHandler(e){if(!e.ok&&(401===e.status||404===e.status))throw console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const o=Object.assign(Object.assign({},this.options),e);let r=`${this.baseLink}${t}?`;for(const[e,t]of Object.entries(o))r+=`${e}=${t}&`;return r.slice(0,-1)}load(e,t,o,r={}){fetch(this.makeUrl(r,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>o(e))).catch((e=>console.error(e)))}}},901:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppView=void 0;const s=r(o(461)),n=r(o(381));class u{constructor(){this.news=new s.default,this.sources=new n.default}drawNews(e){const t=(null==e?void 0:e.articles)?null==e?void 0:e.articles:[];this.news.draw(t)}drawSources(e){const t=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[];this.sources.draw(t)}}t.AppView=u,t.default=u},461:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),o(440),t.default=class{draw(e){var t;const o=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),s=document.querySelector("#newsItemTemp");o.forEach(((e,t)=>{const o=null==s?void 0:s.content.cloneNode(!0);t%2&&o.querySelector(".news__item").classList.add("alt"),o.querySelector(".news__meta-photo").setAttribute("style",`background-image:url(${e.urlToImage||"img/news_placeholder.jpg"})`),o.querySelector(".news__meta-author").textContent=e.author||e.source.name,o.querySelector(".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),o.querySelector(".news__description-title").textContent=e.title,o.querySelector(".news__description-source").textContent=e.source.name,o.querySelector(".news__description-content").textContent=e.description,o.querySelector(".news__read-more a").setAttribute("href",e.url),r.append(o)}));const n=document.querySelector(".news");null!=n&&(n.innerHTML=""),null===(t=null===document||void 0===document?void 0:document.querySelector(".news"))||void 0===t||t.appendChild(r)}}},381:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),o(609),t.default=class{draw(e){var t;const o=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");e.forEach((e=>{var t;const s=null===(t=null==r?void 0:r.content)||void 0===t?void 0:t.cloneNode(!0);s.querySelector(".source__item-name").textContent=e.name,s.querySelector(".source__item").setAttribute("data-source-id",e.id),o.append(s)})),null===(t=null===document||void 0===document?void 0:document.querySelector(".sources"))||void 0===t||t.append(o)}}},303:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(o(956));o(787),(new s.default).start()}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(303)})();